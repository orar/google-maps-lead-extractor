# Use Apify's base image with Playwright pre-installed
FROM apify/actor-node-playwright-chrome:20

# Copy package files first for better caching
COPY package.json ./

# Install dependencies with npm (simpler, no permission issues)
RUN npm install --production

# Copy the rest of the application
COPY . ./

# Install Playwright browsers (may already be installed in base image)
RUN npx playwright install chromium --with-deps

# Run the Actor
CMD npm start
